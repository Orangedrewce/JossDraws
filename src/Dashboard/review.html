<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="robots" content="index, follow">
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
               script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
               style-src 'self' 'unsafe-inline';
               connect-src https://pciubbwphwpnptgawgok.supabase.co;
               img-src 'self' data: blob: https://pciubbwphwpnptgawgok.supabase.co;
               font-src 'self';
               object-src 'none';
               base-uri 'self';
               form-action 'self';
               frame-ancestors 'none';">
  <title>Leave a Review | JossDraws Custom Pet Portraits</title>
  <meta name="description" content="Leave a review for JossDraws custom pet portraits and artwork. Your feedback helps support independent artists.">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <link rel="canonical" href="https://www.jossdraws.com/Dashboard/review.html">
  <meta property="og:title" content="Leave a Review | JossDraws">
  <meta property="og:description" content="Share your experience with JossDraws custom pet portraits and artwork.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.jossdraws.com/Dashboard/review.html">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leave a Review | JossDraws">
  <meta name="twitter:description" content="Share your experience with JossDraws custom pet portraits and artwork.">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.95.3/dist/umd/supabase.min.js"></script>
  <link rel="stylesheet" href="css/review.css">
</head>
<body>

  <main class="review-container">

    <div id="loadingState" class="loader">
      <h3>Validating Link...</h3>
    </div>

    <div id="invalidState" class="hidden error-screen">
      <h2>Link Invalid or Expired</h2>
      <p>This review link has already been used or has expired.</p>
      <p style="font-size: 0.9rem; margin-top: 1rem;">If you'd still like to leave feedback, please reach out directly üíõ</p>
    </div>

    <div id="formState" class="hidden">
      <h2>Share Your Experience</h2>
      <p style="text-align: center; color: var(--color-muted); margin-bottom: 2rem;">I'd love to hear what you think!</p>

      <div id="formError" class="error-message" role="alert"></div>

      <form id="reviewForm" novalidate>
        <!-- Honeypot field for bot prevention -->
        <input type="text" name="website" class="honeypot" tabindex="-1" autocomplete="off" aria-hidden="true">

        <label for="clientName">Name</label>
        <input type="text" id="clientName" placeholder="e.g. Jane D." maxlength="60" pattern="^[a-zA-Z\s\-\.]+$" title="Please enter a valid name (letters, spaces, hyphens, and periods only)" autocomplete="name" required>

        <label for="ratingScore">Rating</label>
        <select id="ratingScore" aria-label="Rating selection" required>
            <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5 Stars)</option>
            <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê (4 Stars)</option>
            <option value="3">‚≠ê‚≠ê‚≠ê (3 Stars)</option>
            <option value="2">‚≠ê‚≠ê (2 Stars)</option>
            <option value="1">‚≠ê (1 Star)</option>
        </select>

        <label for="reviewText">Review</label>
        <textarea id="reviewText" rows="5" maxlength="280" placeholder="Loved the print..." spellcheck="true" required></textarea>

        <div id="charCounter">280 remaining</div>

        <label for="photoUpload">Photo <span class="label-optional">(optional)</span></label>
        <div class="photo-upload-area" id="photoUploadArea">
          <input type="file" id="photoUpload" accept="image/jpeg,image/png,image/webp" class="file-input" aria-label="Upload a photo">
          <div id="uploadPrompt" class="upload-prompt">
            <span class="upload-icon">üì∑</span>
            <span>Tap to add a photo</span>
          </div>
          <div id="photoPreview" class="photo-preview hidden">
            <img id="previewImg" alt="Preview of your uploaded photo">
            <button type="button" id="removePhoto" class="remove-photo" aria-label="Remove photo">‚úï</button>
          </div>
        </div>

        <button type="submit" class="btn" id="submitBtn">Submit Review</button>
      </form>
    </div>

    <div id="successState" class="hidden success-screen">
      <h2>Thank You!</h2>
      <p>Your review has been submitted.</p>
    </div>

  </main>

  <div id="toast" class="toast"></div>

<script src="js/review.js"></script>
</body>
</html>